<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>A naive approach to blogging | xrazis · Haris Razis</title>
<meta name=keywords content="Web,Frontend,Backend"><meta name=description content="Introduction
Building a blog from the ground up can be quite interesting. It won’t and can’t be a match to a feature-rich blogging
engine, without any substantial effort at least, but it will help you understand topics like REST, CRUD, and many more.
A while ago I created alfacycling.com, a primitive blog to get my hands
dirty with new technologies.
Architecture
The idea behind this project was pretty simple, have a landing page with some info about the team and two sub-routes
with all the blogging and user functions. There is no user support besides a moderator, with some basic capabilities
like creating, editing, or deleting a blog post."><meta name=author content><link rel=canonical href=https://haris.razis.com/posts/alfacycling/><link crossorigin=anonymous href=/assets/css/stylesheet.7ada26225601177355d925d8020cc425b32600338001f38a6a764b249f875c98.css integrity="sha256-etomIlYBF3NV2SXYAgzEJbMmADOAAfOKanZLJJ+HXJg=" rel="preload stylesheet" as=style><link rel=icon href=https://haris.razis.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://haris.razis.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://haris.razis.com/favicon.png><link rel=apple-touch-icon href=https://haris.razis.com/apple-touch-icon.png><link rel=mask-icon href=https://haris.razis.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://haris.razis.com/posts/alfacycling/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="A naive approach to blogging"><meta property="og:description" content="Introduction
Building a blog from the ground up can be quite interesting. It won’t and can’t be a match to a feature-rich blogging
engine, without any substantial effort at least, but it will help you understand topics like REST, CRUD, and many more.
A while ago I created alfacycling.com, a primitive blog to get my hands
dirty with new technologies.
Architecture
The idea behind this project was pretty simple, have a landing page with some info about the team and two sub-routes
with all the blogging and user functions. There is no user support besides a moderator, with some basic capabilities
like creating, editing, or deleting a blog post."><meta property="og:type" content="article"><meta property="og:url" content="https://haris.razis.com/posts/alfacycling/"><meta property="og:image" content="https://haris.razis.com/cup.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-03-15T00:00:00+00:00"><meta property="article:modified_time" content="2022-03-15T00:00:00+00:00"><meta property="og:site_name" content="xrazis"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://haris.razis.com/cup.png"><meta name=twitter:title content="A naive approach to blogging"><meta name=twitter:description content="Introduction
Building a blog from the ground up can be quite interesting. It won’t and can’t be a match to a feature-rich blogging
engine, without any substantial effort at least, but it will help you understand topics like REST, CRUD, and many more.
A while ago I created alfacycling.com, a primitive blog to get my hands
dirty with new technologies.
Architecture
The idea behind this project was pretty simple, have a landing page with some info about the team and two sub-routes
with all the blogging and user functions. There is no user support besides a moderator, with some basic capabilities
like creating, editing, or deleting a blog post."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://haris.razis.com/posts/"},{"@type":"ListItem","position":2,"name":"A naive approach to blogging","item":"https://haris.razis.com/posts/alfacycling/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"A naive approach to blogging","name":"A naive approach to blogging","description":"Introduction Building a blog from the ground up can be quite interesting. It won’t and can’t be a match to a feature-rich blogging engine, without any substantial effort at least, but it will help you understand topics like REST, CRUD, and many more. A while ago I created alfacycling.com, a primitive blog to get my hands dirty with new technologies.\nArchitecture The idea behind this project was pretty simple, have a landing page with some info about the team and two sub-routes with all the blogging and user functions. There is no user support besides a moderator, with some basic capabilities like creating, editing, or deleting a blog post.\n","keywords":["Web","Frontend","Backend"],"articleBody":"Introduction Building a blog from the ground up can be quite interesting. It won’t and can’t be a match to a feature-rich blogging engine, without any substantial effort at least, but it will help you understand topics like REST, CRUD, and many more. A while ago I created alfacycling.com, a primitive blog to get my hands dirty with new technologies.\nArchitecture The idea behind this project was pretty simple, have a landing page with some info about the team and two sub-routes with all the blogging and user functions. There is no user support besides a moderator, with some basic capabilities like creating, editing, or deleting a blog post.\nThis is a monolithic application design, with a MYSQL database for user authentication and data storage. The project is built on Node.js with the help of Express for the Backend and EJS for the Frontend. Some cool libraries were used, like Passport for authenticating users or Puppeteer and Mocha for testing.\nREST Routing Each route is defined in its file. Take for example the /blogs route, where all CRUD operations regarding blogs exist. Defining a route is simple enough with Express.js.\nrouter.get('/blogs/:id', async (req, res) =\u003e { res.render('blogs/show', { blog: await getOneFromDatabase(req.params.id), blog_id: req.params.id }); }); The GET route in the snippet above returns a single blog entry. Since we are using EJS we have to render each view and pass in, if any, required parameters.\nAbstracting actions Since a lot of code is duplicated, for example a database query, it makes sense to abstract that to a separate file and export it as a module.\nmodule.exports = { getOneFromDatabase: async (id) =\u003e { const sql = 'SELECT * FROM blogs WHERE blogs.id = ?;'; const foundBlog = await db.query(sql, id); return foundBlog; }, // More actions }; The action getOneFromDatabase returns a single blog entry that matches a given id. A lot cleaner now!\nAuthentication For authentication Passport was used, a middleware that supports various authentication strategies from local to Facebook and Twitter. Take a look at the local login strategy.\npassport.use('login', new LocalStrategy({ usernameField: 'username', passwordField: 'password' }, async (username, password, done) =\u003e { const user = await findUser(username); bcrypt.compare(password, user[0].password, (err, result) =\u003e { if (err) throw err; if (result) { return done(null, user[0]); } else { const errors = [{value: 'Exists', msg: 'Wrong Password!', param: 'password', location: 'passport'}]; return done(null, false, errors); } }); })); A user is retrieved by his username and has the password he provided compared with the one saved in the database. The comparison is done with the bcrypt library as passwords are not saved in plain text but rather hashed and salted.\nTesting Testing is an integral part of any application, or to phrase it better, it should be. Since our application requires signing in and we want each testing session to be clear of any remains, we have to create a user and session factory.\nmodule.exports = async () =\u003e { const id = crypto.randomBytes(4).toString(\"hex\"); const sql = 'INSERT INTO users (id) values (?)'; await db.query(sql, id); return id; } We firstly create a user entry in the database. That is simple enough, we create an entry with just an id - the only field we are going to need.\nmodule.exports = (id) =\u003e { const sessionObject = { passport: { user: id } }; const session = buffer.from(JSON.stringify(sessionObject)).toString('base64'); const sig = keygrip.sign('express:sess=' + session); return {session, sig}; }; Next, we forge a session by creating two cookies: express:sess and express:sess.sig. This will trick our server into thinking we are an authenticated user and thus allowing us to see restricted routes. The cookies name are specific to the cookie middleware we are using.\nDeployment Deployment is handled by docker and docker-compose. The dockerfile for alfacycling.com is pretty straightforward. Pull the specified node image, set the working directory, copy the package.json and package-lock.json files in the container, run npm install, expose the server port, and run the application!\nFROM node:14.16.0-alpine3.10 WORKDIR /usr/src/app/alfacycling.com COPY package*.json ./ RUN npm install EXPOSE 8080 CMD [ \"npm\", \"run\", \"dev\" ] In docker-compose.yml we define two services: web which is the server behind alfacycling.com, and mysql a database instance. This file is pretty explanatory, you can learn more about each key in the docker-compose documentation. One interesting part is the volumes key, which mounts the specified host directories inside the container, allowing you to make changes on the fly, without having you rebuild the image.\nservices: web: build: . container_name: \"alfacycling.com\" ports: - \"8080:8080\" volumes: - ./:/usr/src/app/alfacycling.com - /usr/src/app/alfacycling.com/node_modules depends_on: - mysql mysql: image: mysql container_name: \"mysql\" restart: always env_file: - mysql-variables.env Conclusion There is a lot more going on in the repository, I analyzed just a few key points of this project, what I thought might be more interesting.\n","wordCount":"793","inLanguage":"en","image":"https://haris.razis.com/cup.png","datePublished":"2022-03-15T00:00:00Z","dateModified":"2022-03-15T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://haris.razis.com/posts/alfacycling/"},"publisher":{"@type":"Organization","name":"xrazis · Haris Razis","logo":{"@type":"ImageObject","url":"https://haris.razis.com/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://haris.razis.com/ accesskey=h title="Haris Razis (Alt + H)">Haris Razis</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://haris.razis.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://haris.razis.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">A naive approach to blogging</h1><div class=post-meta><span title='2022-03-15 00:00:00 +0000 UTC'>15 March, 2022</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;793 words</div></header><div class=post-content><h1 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h1><p>Building a blog from the ground up can be quite interesting. It won’t and can’t be a match to a feature-rich blogging
engine, without any substantial effort at least, but it will help you understand topics like REST, CRUD, and many more.
A while ago I created <a href=https://github.com/xrazis/alfacycling.com>alfacycling.com</a>, a primitive blog to get my hands
dirty with new technologies.</p><h1 id=architecture>Architecture<a hidden class=anchor aria-hidden=true href=#architecture>#</a></h1><p>The idea behind this project was pretty simple, have a landing page with some info about the team and two sub-routes
with all the blogging and user functions. There is no user support besides a moderator, with some basic capabilities
like creating, editing, or deleting a blog post.</p><p>This is a monolithic application design, with a MYSQL database for user authentication and data storage. The project is
built on Node.js with the help of Express for the Backend and EJS for the Frontend. Some cool libraries were used, like
Passport for authenticating users or Puppeteer and Mocha for testing.</p><h1 id=rest-routing>REST Routing<a hidden class=anchor aria-hidden=true href=#rest-routing>#</a></h1><p>Each route is defined in its file. Take for example the <code>/blogs</code> route, where all CRUD operations regarding blogs exist.
Defining a route is simple enough with Express.js.</p><div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>router.get(<span style=color:#0ff;font-weight:700>&#39;/blogs/:id&#39;</span>, <span style=color:#fff;font-weight:700>async</span> (req, res) =&gt; {
</span></span><span style=display:flex><span>    res.render(<span style=color:#0ff;font-weight:700>&#39;blogs/show&#39;</span>, {
</span></span><span style=display:flex><span>        blog: <span style=color:#fff;font-weight:700>await</span> getOneFromDatabase(req.params.id),
</span></span><span style=display:flex><span>        blog_id: req.params.id
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>The GET route in the snippet above returns a single blog entry. Since we are using EJS we have to render each view and
pass in, if any, required parameters.</p><h1 id=abstracting-actions>Abstracting actions<a hidden class=anchor aria-hidden=true href=#abstracting-actions>#</a></h1><p>Since a lot of code is duplicated, for example a database query, it makes sense to abstract that to a separate file and
export it as a module.</p><div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>module.exports = {
</span></span><span style=display:flex><span>    getOneFromDatabase: <span style=color:#fff;font-weight:700>async</span> (id) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#fff;font-weight:700>const</span> sql = <span style=color:#0ff;font-weight:700>&#39;SELECT * FROM blogs WHERE blogs.id = ?;&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#fff;font-weight:700>const</span> foundBlog = <span style=color:#fff;font-weight:700>await</span> db.query(sql, id);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#fff;font-weight:700>return</span> foundBlog;
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#007f7f>// More actions
</span></span></span><span style=display:flex><span><span style=color:#007f7f></span>};
</span></span></code></pre></div><p>The action <code>getOneFromDatabase</code> returns a single blog entry that matches a given <code>id</code>. A lot cleaner now!</p><h1 id=authentication>Authentication<a hidden class=anchor aria-hidden=true href=#authentication>#</a></h1><p>For authentication Passport was used, a middleware that supports various authentication strategies from local to
Facebook and Twitter. Take a look at the local login strategy.</p><div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>passport.use(<span style=color:#0ff;font-weight:700>&#39;login&#39;</span>, <span style=color:#fff;font-weight:700>new</span> LocalStrategy({
</span></span><span style=display:flex><span>    usernameField: <span style=color:#0ff;font-weight:700>&#39;username&#39;</span>,
</span></span><span style=display:flex><span>    passwordField: <span style=color:#0ff;font-weight:700>&#39;password&#39;</span>
</span></span><span style=display:flex><span>}, <span style=color:#fff;font-weight:700>async</span> (username, password, done) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>const</span> user = <span style=color:#fff;font-weight:700>await</span> findUser(username);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    bcrypt.compare(password, user[<span style=color:#ff0;font-weight:700>0</span>].password, (err, result) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#fff;font-weight:700>if</span> (err) <span style=color:#fff;font-weight:700>throw</span> err;
</span></span><span style=display:flex><span>        <span style=color:#fff;font-weight:700>if</span> (result) {
</span></span><span style=display:flex><span>            <span style=color:#fff;font-weight:700>return</span> done(<span style=color:#fff;font-weight:700>null</span>, user[<span style=color:#ff0;font-weight:700>0</span>]);
</span></span><span style=display:flex><span>        } <span style=color:#fff;font-weight:700>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#fff;font-weight:700>const</span> errors = [{value: <span style=color:#0ff;font-weight:700>&#39;Exists&#39;</span>, msg: <span style=color:#0ff;font-weight:700>&#39;Wrong Password!&#39;</span>, param: <span style=color:#0ff;font-weight:700>&#39;password&#39;</span>, location: <span style=color:#0ff;font-weight:700>&#39;passport&#39;</span>}];
</span></span><span style=display:flex><span>            <span style=color:#fff;font-weight:700>return</span> done(<span style=color:#fff;font-weight:700>null</span>, <span style=color:#fff;font-weight:700>false</span>, errors);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>}));
</span></span></code></pre></div><p>A user is retrieved by his username and has the password he provided compared with the one saved in the database. The
comparison is done with the bcrypt library as passwords are not saved in plain text but rather hashed and salted.</p><h1 id=testing>Testing<a hidden class=anchor aria-hidden=true href=#testing>#</a></h1><p>Testing is an integral part of any application, or to phrase it better, it should be. Since our application requires
signing in and we want each testing session to be clear of any remains, we have to create a user and session factory.</p><div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>module.exports = <span style=color:#fff;font-weight:700>async</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>const</span> id = crypto.randomBytes(<span style=color:#ff0;font-weight:700>4</span>).toString(<span style=color:#0ff;font-weight:700>&#34;hex&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>const</span> sql = <span style=color:#0ff;font-weight:700>&#39;INSERT INTO users (id) values (?)&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>await</span> db.query(sql, id);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>return</span> id;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>We firstly create a user entry in the database. That is simple enough, we create an entry with just an id - the only
field we are going to need.</p><div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>module.exports = (id) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>const</span> sessionObject = {
</span></span><span style=display:flex><span>        passport: {
</span></span><span style=display:flex><span>            user: id
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>const</span> session = buffer.from(JSON.stringify(sessionObject)).toString(<span style=color:#0ff;font-weight:700>&#39;base64&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>const</span> sig = keygrip.sign(<span style=color:#0ff;font-weight:700>&#39;express:sess=&#39;</span> + session);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#fff;font-weight:700>return</span> {session, sig};
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Next, we forge a session by creating two cookies: <code>express:sess</code> and <code>express:sess.sig</code>. This will trick our server into
thinking we are an authenticated user and thus allowing us to see restricted routes. The cookies name are specific to
the cookie middleware we are using.</p><h1 id=deployment>Deployment<a hidden class=anchor aria-hidden=true href=#deployment>#</a></h1><p>Deployment is handled by docker and docker-compose. The dockerfile for alfacycling.com is pretty straightforward. Pull
the specified node image, set the working directory, copy the <code>package.json</code> and <code>package-lock.json</code> files in the
container, run npm install, expose the server port, and run the application!</p><div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=display:flex><span><span style=color:#fff;font-weight:700>FROM</span><span style=color:#0ff;font-weight:700> node:14.16.0-alpine3.10</span><span style=color:red>
</span></span></span><span style=display:flex><span><span style=color:red>
</span></span></span><span style=display:flex><span><span style=color:red></span><span style=color:#fff;font-weight:700>WORKDIR</span><span style=color:#0ff;font-weight:700> /usr/src/app/alfacycling.com</span><span style=color:red>
</span></span></span><span style=display:flex><span><span style=color:red>
</span></span></span><span style=display:flex><span><span style=color:red></span><span style=color:#fff;font-weight:700>COPY</span> package*.json ./<span style=color:red>
</span></span></span><span style=display:flex><span><span style=color:red>
</span></span></span><span style=display:flex><span><span style=color:red></span><span style=color:#fff;font-weight:700>RUN</span> npm install<span style=color:red>
</span></span></span><span style=display:flex><span><span style=color:red>
</span></span></span><span style=display:flex><span><span style=color:red></span><span style=color:#fff;font-weight:700>EXPOSE</span><span style=color:#0ff;font-weight:700> 8080</span><span style=color:red>
</span></span></span><span style=display:flex><span><span style=color:red>
</span></span></span><span style=display:flex><span><span style=color:red></span><span style=color:#fff;font-weight:700>CMD</span> [ <span style=color:#0ff;font-weight:700>&#34;npm&#34;</span>, <span style=color:#0ff;font-weight:700>&#34;run&#34;</span>, <span style=color:#0ff;font-weight:700>&#34;dev&#34;</span> ]<span style=color:red>
</span></span></span></code></pre></div><p>In <code>docker-compose.yml</code> we define two services: <code>web</code> which is the server behind alfacycling.com, and <code>mysql</code> a
database instance. This file is pretty explanatory, you can learn more about each key in the docker-compose
documentation. One interesting part is the volumes key, which mounts the specified host directories inside the
container, allowing you to make changes on the fly, without having you rebuild the image.</p><div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=font-weight:700>services</span>:
</span></span><span style=display:flex><span>  <span style=font-weight:700>web</span>:
</span></span><span style=display:flex><span>    <span style=font-weight:700>build</span>: .
</span></span><span style=display:flex><span>    <span style=font-weight:700>container_name</span>: <span style=color:#0ff;font-weight:700>&#34;alfacycling.com&#34;</span>
</span></span><span style=display:flex><span>    <span style=font-weight:700>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#0ff;font-weight:700>&#34;8080:8080&#34;</span>
</span></span><span style=display:flex><span>    <span style=font-weight:700>volumes</span>:
</span></span><span style=display:flex><span>      - ./:/usr/src/app/alfacycling.com
</span></span><span style=display:flex><span>      - /usr/src/app/alfacycling.com/node_modules
</span></span><span style=display:flex><span>    <span style=font-weight:700>depends_on</span>:
</span></span><span style=display:flex><span>      - mysql
</span></span><span style=display:flex><span>  <span style=font-weight:700>mysql</span>:
</span></span><span style=display:flex><span>    <span style=font-weight:700>image</span>: mysql
</span></span><span style=display:flex><span>    <span style=font-weight:700>container_name</span>: <span style=color:#0ff;font-weight:700>&#34;mysql&#34;</span>
</span></span><span style=display:flex><span>    <span style=font-weight:700>restart</span>: always
</span></span><span style=display:flex><span>    <span style=font-weight:700>env_file</span>:
</span></span><span style=display:flex><span>      - mysql-variables.env
</span></span></code></pre></div><h1 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h1><p>There is a lot more going on in the repository, I analyzed just a few key points of this project, what I thought might
be more interesting.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://haris.razis.com/tags/web/>Web</a></li><li><a href=https://haris.razis.com/tags/frontend/>Frontend</a></li><li><a href=https://haris.razis.com/tags/backend/>Backend</a></li></ul></footer></article></main><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>