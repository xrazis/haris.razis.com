<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Unresolvable host workaround with resolved.conf | xrazis · Haris Razis</title><meta name=keywords content="Linux,Networking"><meta name=description content="Introduction
I encountered a weird issue the other day at work where I could not resolve a specific dev server on my laptop. Despite
being logged to the company&rsquo;s VPN and being able to resolve all the other servers, this specific one stubbornly
refused. Going through the debugging process of a complex network was not an option, so resolved.conf came to the
rescue.
Network Name Resolution configuration files
The file resolved.conf is responsible for local DNS and LLNMR (Link-Local Multicast Name Resolution) name resolution.
The main file can be found under /etc/systemd and its entries override any defaults. The following configuration was
needed for the server to resolve."><meta name=author content><link rel=canonical href=https://haris.razis.com/posts/resolved.conf/><link crossorigin=anonymous href=/assets/css/stylesheet.7ada26225601177355d925d8020cc425b32600338001f38a6a764b249f875c98.css integrity="sha256-etomIlYBF3NV2SXYAgzEJbMmADOAAfOKanZLJJ+HXJg=" rel="preload stylesheet" as=style><link rel=icon href=https://haris.razis.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://haris.razis.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://haris.razis.com/favicon.png><link rel=apple-touch-icon href=https://haris.razis.com/apple-touch-icon.png><link rel=mask-icon href=https://haris.razis.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://haris.razis.com/posts/resolved.conf/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Unresolvable host workaround with resolved.conf"><meta property="og:description" content="Introduction
I encountered a weird issue the other day at work where I could not resolve a specific dev server on my laptop. Despite
being logged to the company&rsquo;s VPN and being able to resolve all the other servers, this specific one stubbornly
refused. Going through the debugging process of a complex network was not an option, so resolved.conf came to the
rescue.
Network Name Resolution configuration files
The file resolved.conf is responsible for local DNS and LLNMR (Link-Local Multicast Name Resolution) name resolution.
The main file can be found under /etc/systemd and its entries override any defaults. The following configuration was
needed for the server to resolve."><meta property="og:type" content="article"><meta property="og:url" content="https://haris.razis.com/posts/resolved.conf/"><meta property="og:image" content="https://haris.razis.com/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-06-23T00:00:00+00:00"><meta property="article:modified_time" content="2022-06-23T00:00:00+00:00"><meta property="og:site_name" content="xrazis"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://haris.razis.com/"><meta name=twitter:title content="Unresolvable host workaround with resolved.conf"><meta name=twitter:description content="Introduction
I encountered a weird issue the other day at work where I could not resolve a specific dev server on my laptop. Despite
being logged to the company&rsquo;s VPN and being able to resolve all the other servers, this specific one stubbornly
refused. Going through the debugging process of a complex network was not an option, so resolved.conf came to the
rescue.
Network Name Resolution configuration files
The file resolved.conf is responsible for local DNS and LLNMR (Link-Local Multicast Name Resolution) name resolution.
The main file can be found under /etc/systemd and its entries override any defaults. The following configuration was
needed for the server to resolve."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://haris.razis.com/posts/"},{"@type":"ListItem","position":2,"name":"Unresolvable host workaround with resolved.conf","item":"https://haris.razis.com/posts/resolved.conf/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Unresolvable host workaround with resolved.conf","name":"Unresolvable host workaround with resolved.conf","description":"Introduction I encountered a weird issue the other day at work where I could not resolve a specific dev server on my laptop. Despite being logged to the company\u0026rsquo;s VPN and being able to resolve all the other servers, this specific one stubbornly refused. Going through the debugging process of a complex network was not an option, so resolved.conf came to the rescue.\nNetwork Name Resolution configuration files The file resolved.conf is responsible for local DNS and LLNMR (Link-Local Multicast Name Resolution) name resolution. The main file can be found under /etc/systemd and its entries override any defaults. The following configuration was needed for the server to resolve.\n","keywords":["Linux","Networking"],"articleBody":"Introduction I encountered a weird issue the other day at work where I could not resolve a specific dev server on my laptop. Despite being logged to the company’s VPN and being able to resolve all the other servers, this specific one stubbornly refused. Going through the debugging process of a complex network was not an option, so resolved.conf came to the rescue.\nNetwork Name Resolution configuration files The file resolved.conf is responsible for local DNS and LLNMR (Link-Local Multicast Name Resolution) name resolution. The main file can be found under /etc/systemd and its entries override any defaults. The following configuration was needed for the server to resolve.\nDNS - Define the IPv4/IPv6 entry (or entries) to use as a system DNS servers. Domains - Domains we want to process using the predefined DNS servers. They are processed in the order they are listed, until a match is found. DNS=195.47.208.14 Domains=opap.local open.local After saving the file with the new entry reload the services as such:\n~ ➜ sudo systemctl daemon-reload sudo systemctl restart systemd-networkd sudo systemctl restart systemd-resolved And check that the server now resolves:\n~ ➜ ping tzokerdev.opap.gr -c 4 PING pamdev05.opap.local (10.126.2.45) 56(84) bytes of data. 64 bytes from 10.126.2.45 (10.126.2.45): icmp_seq=1 ttl=63 time=32.9 ms 64 bytes from 10.126.2.45 (10.126.2.45): icmp_seq=2 ttl=63 time=30.5 ms 64 bytes from 10.126.2.45 (10.126.2.45): icmp_seq=3 ttl=63 time=29.5 ms 64 bytes from 10.126.2.45 (10.126.2.45): icmp_seq=4 ttl=63 time=32.8 ms --- pamdev05.opap.local ping statistics --- 4 packets transmitted, 4 received, 0% packet loss, time 3004ms rtt min/avg/max/mdev = 29.503/31.433/32.931/1.469 ms ","wordCount":"254","inLanguage":"en","image":"https://haris.razis.com/","datePublished":"2022-06-23T00:00:00Z","dateModified":"2022-06-23T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://haris.razis.com/posts/resolved.conf/"},"publisher":{"@type":"Organization","name":"xrazis · Haris Razis","logo":{"@type":"ImageObject","url":"https://haris.razis.com/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://haris.razis.com/ accesskey=h title="Haris Razis (Alt + H)">Haris Razis</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://haris.razis.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://haris.razis.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Unresolvable host workaround with resolved.conf</h1><div class=post-meta><span title='2022-06-23 00:00:00 +0000 UTC'>23 June, 2022</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;254 words</div></header><div class=post-content><h1 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h1><p>I encountered a weird issue the other day at work where I could not resolve a specific dev server on my laptop. Despite
being logged to the company&rsquo;s VPN and being able to resolve all the other servers, this specific one stubbornly
refused. Going through the debugging process of a complex network was not an option, so <code>resolved.conf</code> came to the
rescue.</p><h1 id=network-name-resolution-configuration-files>Network Name Resolution configuration files<a hidden class=anchor aria-hidden=true href=#network-name-resolution-configuration-files>#</a></h1><p>The file <code>resolved.conf</code> is responsible for local DNS and LLNMR (Link-Local Multicast Name Resolution) name resolution.
The main file can be found under <code>/etc/systemd</code> and its entries override any defaults. The following configuration was
needed for the server to resolve.</p><ol><li><code>DNS</code> - Define the IPv4/IPv6 entry (or entries) to use as a system DNS servers.</li><li><code>Domains</code> - Domains we want to process using the predefined DNS servers. They are processed in the order they are
listed, until a match is found.</li></ol><pre tabindex=0><code class=language-conf data-lang=conf>DNS=195.47.208.14
Domains=opap.local open.local
</code></pre><p>After saving the file with the new entry reload the services as such:</p><div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>~
</span></span><span style=display:flex><span>➜ sudo systemctl daemon-reload
</span></span><span style=display:flex><span>  sudo systemctl restart systemd-networkd
</span></span><span style=display:flex><span>  sudo systemctl restart systemd-resolved
</span></span></code></pre></div><p>And check that the server now resolves:</p><div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>~
</span></span><span style=display:flex><span>➜ ping tzokerdev.opap.gr -c <span style=color:#ff0;font-weight:700>4</span>
</span></span><span style=display:flex><span>PING pamdev05.opap.local (10.126.2.45) 56(84) bytes of data.
</span></span><span style=display:flex><span><span style=color:#ff0;font-weight:700>64</span> bytes from 10.126.2.45 (10.126.2.45): icmp_seq=<span style=color:#ff0;font-weight:700>1</span> ttl=<span style=color:#ff0;font-weight:700>63</span> time=32.9 ms
</span></span><span style=display:flex><span><span style=color:#ff0;font-weight:700>64</span> bytes from 10.126.2.45 (10.126.2.45): icmp_seq=<span style=color:#ff0;font-weight:700>2</span> ttl=<span style=color:#ff0;font-weight:700>63</span> time=30.5 ms
</span></span><span style=display:flex><span><span style=color:#ff0;font-weight:700>64</span> bytes from 10.126.2.45 (10.126.2.45): icmp_seq=<span style=color:#ff0;font-weight:700>3</span> ttl=<span style=color:#ff0;font-weight:700>63</span> time=29.5 ms
</span></span><span style=display:flex><span><span style=color:#ff0;font-weight:700>64</span> bytes from 10.126.2.45 (10.126.2.45): icmp_seq=<span style=color:#ff0;font-weight:700>4</span> ttl=<span style=color:#ff0;font-weight:700>63</span> time=32.8 ms
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>--- pamdev05.opap.local ping statistics ---
</span></span><span style=display:flex><span><span style=color:#ff0;font-weight:700>4</span> packets transmitted, <span style=color:#ff0;font-weight:700>4</span> received, 0% packet loss, <span style=color:#fff;font-weight:700>time</span> 3004ms
</span></span><span style=display:flex><span>rtt min/avg/max/mdev = 29.503/31.433/32.931/1.469 ms
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://haris.razis.com/tags/linux/>Linux</a></li><li><a href=https://haris.razis.com/tags/networking/>Networking</a></li></ul></footer></article></main><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>