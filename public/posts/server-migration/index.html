<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Migrating a Plesk server with multiple production environments. | xrazis · Haris Razis</title>
<meta name=keywords content="System,Linux,Networking,Plesk"><meta name=description content="Introduction
I have been maintaining a managed Plesk server on a Greek hosting provider for the past few years. It contains a handful
of production websites and their respective mail servers. While it was okayish for basic hosting needs, the demands
quickly outgrew it with limitations starting to appear on the infrastructure, supported technologies, and services.
After a little market research, I decided that the way forward would be Digital Ocean, as they provide solid cloud
infrastructure with a plethora of tools. I also decided to keep Plesk as the server
management platform. It will be adequate for the low needs of basic Node.js sites and small eshops, with the
added benefit of an embedded mail server, security features, automations, and backups."><meta name=author content><link rel=canonical href=https://haris.razis.com/posts/server-migration/><link crossorigin=anonymous href=/assets/css/stylesheet.7ada26225601177355d925d8020cc425b32600338001f38a6a764b249f875c98.css integrity="sha256-etomIlYBF3NV2SXYAgzEJbMmADOAAfOKanZLJJ+HXJg=" rel="preload stylesheet" as=style><link rel=icon href=https://haris.razis.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://haris.razis.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://haris.razis.com/favicon.png><link rel=apple-touch-icon href=https://haris.razis.com/apple-touch-icon.png><link rel=mask-icon href=https://haris.razis.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://haris.razis.com/posts/server-migration/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Migrating a Plesk server with multiple production environments."><meta property="og:description" content="Introduction
I have been maintaining a managed Plesk server on a Greek hosting provider for the past few years. It contains a handful
of production websites and their respective mail servers. While it was okayish for basic hosting needs, the demands
quickly outgrew it with limitations starting to appear on the infrastructure, supported technologies, and services.
After a little market research, I decided that the way forward would be Digital Ocean, as they provide solid cloud
infrastructure with a plethora of tools. I also decided to keep Plesk as the server
management platform. It will be adequate for the low needs of basic Node.js sites and small eshops, with the
added benefit of an embedded mail server, security features, automations, and backups."><meta property="og:type" content="article"><meta property="og:url" content="https://haris.razis.com/posts/server-migration/"><meta property="og:image" content="https://haris.razis.com/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-23T00:00:00+00:00"><meta property="article:modified_time" content="2024-09-23T00:00:00+00:00"><meta property="og:site_name" content="xrazis"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://haris.razis.com/"><meta name=twitter:title content="Migrating a Plesk server with multiple production environments."><meta name=twitter:description content="Introduction
I have been maintaining a managed Plesk server on a Greek hosting provider for the past few years. It contains a handful
of production websites and their respective mail servers. While it was okayish for basic hosting needs, the demands
quickly outgrew it with limitations starting to appear on the infrastructure, supported technologies, and services.
After a little market research, I decided that the way forward would be Digital Ocean, as they provide solid cloud
infrastructure with a plethora of tools. I also decided to keep Plesk as the server
management platform. It will be adequate for the low needs of basic Node.js sites and small eshops, with the
added benefit of an embedded mail server, security features, automations, and backups."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://haris.razis.com/posts/"},{"@type":"ListItem","position":2,"name":"Migrating a Plesk server with multiple production environments.","item":"https://haris.razis.com/posts/server-migration/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Migrating a Plesk server with multiple production environments.","name":"Migrating a Plesk server with multiple production environments.","description":"Introduction I have been maintaining a managed Plesk server on a Greek hosting provider for the past few years. It contains a handful of production websites and their respective mail servers. While it was okayish for basic hosting needs, the demands quickly outgrew it with limitations starting to appear on the infrastructure, supported technologies, and services.\nAfter a little market research, I decided that the way forward would be Digital Ocean, as they provide solid cloud infrastructure with a plethora of tools. I also decided to keep Plesk as the server management platform. It will be adequate for the low needs of basic Node.js sites and small eshops, with the added benefit of an embedded mail server, security features, automations, and backups.\n","keywords":["System","Linux","Networking","Plesk"],"articleBody":"Introduction I have been maintaining a managed Plesk server on a Greek hosting provider for the past few years. It contains a handful of production websites and their respective mail servers. While it was okayish for basic hosting needs, the demands quickly outgrew it with limitations starting to appear on the infrastructure, supported technologies, and services.\nAfter a little market research, I decided that the way forward would be Digital Ocean, as they provide solid cloud infrastructure with a plethora of tools. I also decided to keep Plesk as the server management platform. It will be adequate for the low needs of basic Node.js sites and small eshops, with the added benefit of an embedded mail server, security features, automations, and backups.\nDigital Ocean and Plesk Digital Ocean features droplets, which are servers, standalone or part of a larger infrastructure—essentially Linux-based virtual machines on top of virtualized hardware. Digital Ocean’s marketplace offers ready-to-deploy droplets, and the one we are interested in is Plesk. It comes on top of Ubuntu and bundles with common server software like Apache, Nginx, Git, and many more. What you don’t find out of the box can probably be installed as an extension to Plesk.\nSetting up is trivial, you follow the onscreen instructions, and you are set to go in no time. The Plesk panel login URL is going to be your droplet’s public IP address. I scaled the droplet to 2vCPU, 4GB RAM; it should be more than adequate for the Plesk instance to handle the relatively small load of my websites.\nFrom the Digital Ocean panel you can set up monitoring for resources and uptime, manage your domains, increase allocated resources, span new droplets, configure a firewall, or split the traffic to many droplets with a load balancer. The list just goes on. I’m really fond of the way they structured it.\nWebsite and email Migration Node.js and Hugo Migrating websites built on Node.js and Hugo is fairly easy:\nSet up the corresponding webspaces. Set up automatic Git deployment. For Node.js sites set through the plesk extension. Make sure there is no leftover index.html in the document root or else you are always going to be served the Plesk default page! For static sites like Hugo point to the correct document root (/httpdocs/public) through the Hosting settings. Change nameservers and point the domain to the DO nameservers. Be sure to configure the DigitalOcean DNS extension as well. Once the nameserver change propagates, install the new SSL certificates. It appears that .com domains propagates quite fast, whereas .gr domains take a while longer. WordPress WordPress sites can be migrated by either a dedicated plugin or manually by moving the DB and files. I chose to move them by hand.\nMake a new instance of WordPress. Give it the same name as the website you are bringing over. Move files from the old server. If you have ssh access, zip and then use rsync to bring them over. Once you replace the old files, remember to change permissions. Use the system user for that specific webspace, and execute chown -R : httpdocs. You can see what group the previous installation used, but it is probably going to be psserv. Export and import the DB. Once that’s done change the DB credentials from wp-config.php You should now be able to access the WP admin panel. In my specific case it was an eshop on top of Woo, so I had to clear relevant DB caches and run a thumbnail regeneration. Email Migrating emails from the old server can be done with Plesk’s mail importing tool. First, create the mailbox in the new server and then follow the onscreen instructions. I found that it also moves the folder structure besides the emails. I exported and reimported the email filters separately.\nPlesk configuration Change Plesk URL Up until now I have been using the randomly generated plesk.page URL to access my instance without an SSL warning. I decided to change it to something more appropriate that would be easy to remember. I used a subdomain that was not used and also resolves to the server IP—I added an A record to DO DNS records that pointed to the droplet IP. That needs to be changed in two places:\n/Tools \u0026 Settings/Customizing Plesk URL /Tools \u0026 Settings/Server Settings/Full Hostname Be sure to issue a valid certificate for your server subdomain/domain. Keep a reference to this section. We are going to discuss a nerve-racking misconfiguration I encountered later.\nBack up There are two options for backing up Plesk configuration, sites, email, and databases:\nOn site—the droplet disk Remote—an external server I have configured both of them. Keeping the backups only on the disk of the droplet is not a good idea. Syncing backups to more than one external server is the way to go with critical data. If things go wrong, you will be able to spin up a new plesk instance much faster this way. There are many Plesk extensions that can sync with DO, Google Drive, and FTP servers.\nPlesk will first do a full backup and afterward do an incremental backup that only contains the data that has changed since. This way, the following backups are less hard on CPU and disk.\nProblems Would it be a true migration without problems? Once everything was transferred and the nameservers were switched, every outgoing mail would get marked as spam from Google, Hotmail, Proton, etc. Some would even get bounced and not get delivered at all. A little digging in the logs and I found the following bounce the server got from a forward rule I have on an email account:\nSep 21 09:27:58 0EEA7827E9: to=, relay=hotmail-com.olc.protection.outlook.com[52.101.194.5]:25, delay=1, delays=0.01/0.01/0.88/0.11, dsn=5.7.1, status=bounced (host hotmail-com.olc.protection.outlook.com [52.101.194.5] said: 550 5.7.1 Service unavailable, Client host [XXX.XXX.XXX.XXX] blocked using Spamhaus. To request removal from this list see https://www.spamhaus.org/query/ip/XXX.XXX.XXX.XXX (AS3130). [Name=Protocol Filter Agent][AGT=PFA][MxId=11B9A53DC314A6C4] [CH3PEPF0000000F.namprd04.prod.outlook.com 2024-09-21T09:27:58.008Z 08DCD29EEC0C7774] (in reply to MAIL FROM command)) So the server is officially on a spam list. Upon checking the incoming mail headers, I also discovered the following:\nReceived: from goofy-lewin.XXX-XXX-XXX-XXX.plesk.page... Received: from webmail.mydomain.gr (localhost.localdomain [IPv6:::1]) by goofy-lewin.XXX-XXX-XXX-XXX.plesk.page (Postfix) Received-Spf: pass (goofy-lewin.XXX-XXX-XXX-XXX.plesk.page: connection is authenticated) I forgot to change the domain address from the temporary generated plesk.page to something I owned. The steps are described in the section Change Plesk URL. Spamhaus describes this misconfiguration on their FAQ:\nThe host name used in the SMTP greeting is the Plesk server host name specified in Tools \u0026 Settings \u003e Server Settings. Selecting this option may result in mail sent from some or all domains being marked as spam if the Plesk server host name fails to resolve properly, or if the domain’s IP is different from the one to which the Plesk server host name resolves. So changing the Plesk URL resolved the issue. I also went ahead and added the hostname in the postfix template, as per Plesk instructions. You also have to update the DNS templates from Plesk and sync the changes to Digital Ocean. The specific ‘problematic’ record is the host txt record.\ndomain.com.\tTXT v=spf1 +a +mx +a:goofy-lewin.XXX-XXX-XXX-XXX.plesk.page -all After the aforementioned changes, everything was back to normal.\n","wordCount":"1190","inLanguage":"en","image":"https://haris.razis.com/","datePublished":"2024-09-23T00:00:00Z","dateModified":"2024-09-23T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://haris.razis.com/posts/server-migration/"},"publisher":{"@type":"Organization","name":"xrazis · Haris Razis","logo":{"@type":"ImageObject","url":"https://haris.razis.com/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://haris.razis.com/ accesskey=h title="Haris Razis (Alt + H)">Haris Razis</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://haris.razis.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://haris.razis.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Migrating a Plesk server with multiple production environments.</h1><div class=post-meta><span title='2024-09-23 00:00:00 +0000 UTC'>23 September, 2024</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1190 words</div></header><div class=post-content><h1 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h1><p>I have been maintaining a managed Plesk server on a Greek hosting provider for the past few years. It contains a handful
of production websites and their respective mail servers. While it was okayish for basic hosting needs, the demands
quickly outgrew it with limitations starting to appear on the infrastructure, supported technologies, and services.</p><p>After a little market research, I decided that the way forward would be Digital Ocean, as they provide solid cloud
infrastructure with a plethora of tools. I also decided to keep Plesk as the server
management platform. It will be adequate for the low needs of basic Node.js sites and small eshops, with the
added benefit of an embedded mail server, security features, automations, and backups.</p><h1 id=digital-ocean-and-plesk>Digital Ocean and Plesk<a hidden class=anchor aria-hidden=true href=#digital-ocean-and-plesk>#</a></h1><p>Digital Ocean features droplets, which are servers, standalone or part of a larger infrastructure—essentially
Linux-based virtual machines on top of virtualized hardware. Digital Ocean&rsquo;s marketplace offers ready-to-deploy
droplets, and the one we are interested in is <a href=https://marketplace.digitalocean.com/apps/plesk>Plesk</a>. It comes on top
of Ubuntu and bundles with common server software like Apache, Nginx, Git, and many more. What you don&rsquo;t find out of the
box can probably be installed as an extension to Plesk.</p><p>Setting up is trivial, you follow the onscreen instructions, and you are set to go in no time. The Plesk panel login URL
is going to be your droplet&rsquo;s public IP address. I scaled the droplet to 2vCPU, 4GB RAM; it should be more than adequate
for the Plesk instance to handle the relatively small load of my websites.</p><p>From the Digital Ocean panel you can set up monitoring for resources and uptime, manage your domains, increase allocated
resources, span new droplets, configure a firewall, or split the traffic to many droplets with a load balancer. The list
just goes on. I&rsquo;m really fond of the way they structured it.</p><h1 id=website-and-email-migration>Website and email Migration<a hidden class=anchor aria-hidden=true href=#website-and-email-migration>#</a></h1><h3 id=nodejs-and-hugo>Node.js and Hugo<a hidden class=anchor aria-hidden=true href=#nodejs-and-hugo>#</a></h3><p>Migrating websites built on Node.js and Hugo is fairly easy:</p><ol><li>Set up the corresponding webspaces.</li><li>Set up automatic Git deployment.<ol><li>For Node.js sites set through the plesk extension. Make sure there is no leftover index.html in the document root
or else you are always going to be served the Plesk default page!</li><li>For static sites like Hugo point to the correct document root (<code>/httpdocs/public</code>) through the Hosting settings.</li></ol></li><li>Change nameservers and point the domain to the DO nameservers. Be sure to configure the DigitalOcean DNS extension as
well.</li><li>Once the nameserver change propagates, install the new SSL certificates. It appears that <code>.com</code> domains propagates
quite fast, whereas <code>.gr</code> domains take a while longer.</li></ol><h3 id=wordpress>WordPress<a hidden class=anchor aria-hidden=true href=#wordpress>#</a></h3><p>WordPress sites can be migrated by either a dedicated plugin or manually by moving the DB and files. I chose to move
them by hand.</p><ol><li>Make a new instance of WordPress. Give it the same name as the website you are bringing over.</li><li>Move files from the old server. If you have ssh access, zip and then use rsync to bring them over. Once you replace
the old files, remember to change permissions. Use the system user for that specific webspace, and execute
<code>chown -R &lt;user>:&lt;group> httpdocs</code>. You can see what group the previous installation used, but it is probably going
to be <code>psserv</code>.</li><li>Export and import the DB. Once that&rsquo;s done change the DB credentials from <code>wp-config.php</code></li><li>You should now be able to access the WP admin panel. In my specific case it was an eshop on top of Woo,
so I had to clear relevant DB caches and run a thumbnail regeneration.</li></ol><h3 id=email>Email<a hidden class=anchor aria-hidden=true href=#email>#</a></h3><p>Migrating emails from the old server can be done with Plesk&rsquo;s mail importing tool. First, create the mailbox in the new
server and then follow the onscreen instructions. I found that it also moves the folder structure besides the emails.
I exported and reimported the email filters separately.</p><h1 id=plesk-configuration>Plesk configuration<a hidden class=anchor aria-hidden=true href=#plesk-configuration>#</a></h1><h3 id=change-plesk-url>Change Plesk URL<a hidden class=anchor aria-hidden=true href=#change-plesk-url>#</a></h3><p>Up until now I have been using the randomly generated <code>plesk.page</code> URL to access my instance without an SSL warning. I
decided to change it to something more appropriate that would be easy to remember. I used a subdomain that was not used
and also resolves to the server IP—I added an A record to DO DNS records that pointed to the droplet IP. That needs to
be changed in two places:</p><ol><li><code>/Tools & Settings/Customizing Plesk URL</code></li><li><code>/Tools & Settings/Server Settings/Full Hostname</code></li></ol><p>Be sure to issue a valid certificate for your server subdomain/domain. Keep a reference to this section. We are going to
discuss a nerve-racking misconfiguration I encountered later.</p><h3 id=back-up>Back up<a hidden class=anchor aria-hidden=true href=#back-up>#</a></h3><p>There are two options for backing up Plesk configuration, sites, email, and databases:</p><ol><li>On site—the droplet disk</li><li>Remote—an external server</li></ol><p>I have configured both of them. Keeping the backups only on the disk of the droplet is not a good idea. Syncing backups
to more than one external server is the way to go with critical data. If things go wrong, you will be able to spin up
a new plesk instance much faster this way. There are many Plesk extensions that can sync with DO, Google Drive, and FTP
servers.</p><p>Plesk will first do a full backup and afterward do an incremental backup that only contains the data that has changed
since. This way, the following backups are less hard on CPU and disk.</p><h1 id=problems>Problems<a hidden class=anchor aria-hidden=true href=#problems>#</a></h1><p>Would it be a true migration without problems? Once everything was transferred and the nameservers were switched, every
outgoing mail would get marked as spam from Google, Hotmail, Proton, etc. Some would even get bounced and not get
delivered at all. A little digging in the logs and I found the following bounce the server got from a forward rule I
have on an email account:</p><div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Sep <span style=color:#ff0;font-weight:700>21</span> 09:27:58 0EEA7827E9: to=&lt;XXXX@hotmail.com&gt;, relay=hotmail-com.olc.protection.outlook.com[52.101.194.5]:25,
</span></span><span style=display:flex><span>delay=1, delays=0.01/0.01/0.88/0.11, dsn=5.7.1, status=bounced (host hotmail-com.olc.protection.outlook.com
</span></span><span style=display:flex><span>[52.101.194.5] said: <span style=color:#ff0;font-weight:700>550</span> 5.7.1 Service unavailable, Client host [XXX.XXX.XXX.XXX] blocked using Spamhaus. 
</span></span><span style=display:flex><span>To request removal from this list see https://www.spamhaus.org/query/ip/XXX.XXX.XXX.XXX (AS3130). 
</span></span><span style=display:flex><span>[Name=Protocol Filter Agent][AGT=PFA][MxId=11B9A53DC314A6C4] 
</span></span><span style=display:flex><span>[CH3PEPF0000000F.namprd04.prod.outlook.com 2024-09-21T09:27:58.008Z 08DCD29EEC0C7774] (in reply to MAIL FROM <span style=color:#fff;font-weight:700>command</span>))
</span></span></code></pre></div><p>So the server is officially on a spam list. Upon checking the incoming mail headers, I also discovered the following:</p><div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Received: from goofy-lewin.XXX-XXX-XXX-XXX.plesk.page...
</span></span><span style=display:flex><span>Received: from webmail.mydomain.gr (localhost.localdomain [IPv6:::1]) by goofy-lewin.XXX-XXX-XXX-XXX.plesk.page (Postfix) 
</span></span><span style=display:flex><span>Received-Spf: pass (goofy-lewin.XXX-XXX-XXX-XXX.plesk.page: connection is authenticated)
</span></span></code></pre></div><p>I forgot to change the domain address from the temporary generated plesk.page to something I owned. The steps are
described in the section <a href=#change-plesk-url>Change Plesk URL</a>.
<a href=https://www.spamhaus.org/faqs/combined-spam-sources-css/#misconfigured-plesk-hosts-in-css>Spamhaus describes this misconfiguration</a>
on their FAQ:</p><div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md><span style=display:flex><span>The host name used in the SMTP greeting is the Plesk server host name specified in Tools <span style=color:red>&amp;</span> Settings &gt; Server Settings.
</span></span><span style=display:flex><span>Selecting this option may result in mail sent from some or all domains being marked as spam if the Plesk server host
</span></span><span style=display:flex><span>name fails to resolve properly, or if the domain’s IP is different from the one to which the Plesk server host name
</span></span><span style=display:flex><span>resolves.
</span></span></code></pre></div><p>So changing the Plesk URL resolved the issue. I also went ahead and added the hostname in the postfix template, as per
<a href=https://support.plesk.com/hc/en-us/articles/12377559724567-How-to-change-the-hostname-and-SMTP-banner-in-Postfix-on-a-Plesk-server>Plesk instructions</a>.
You also have to update the DNS templates from Plesk and sync the changes to Digital Ocean. The specific &lsquo;problematic&rsquo;
record is the host txt record.</p><div class=highlight><pre tabindex=0 style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>domain.com.		TXT 	v=spf1 +a +mx +a:goofy-lewin.XXX-XXX-XXX-XXX.plesk.page -all
</span></span></code></pre></div><p>After the aforementioned changes, everything was back to normal.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://haris.razis.com/tags/system/>System</a></li><li><a href=https://haris.razis.com/tags/linux/>Linux</a></li><li><a href=https://haris.razis.com/tags/networking/>Networking</a></li><li><a href=https://haris.razis.com/tags/plesk/>Plesk</a></li></ul></footer></article></main><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>